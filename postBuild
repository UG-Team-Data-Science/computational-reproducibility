#!/bin/bash

code-server --install-extension ms-python.python
code-server --install-extension lextudio.restructuredtext
code-server --install-extension trond-snekvik.simple-rst

curl -L \
  "https://drive.usercontent.google.com/download?id=12y4nqRhPMNso3q_xnxdtO_r--uFnwOYZ&confirm=xxx" \
  -o /tmp/GitHub.copilot-1.370.1783.vsix && \
  code-server --install-extension /tmp/GitHub.copilot-1.370.1783.vsix && \
  rm /tmp/GitHub.copilot-1.370.1783.vsix
curl -L \
  "https://drive.usercontent.google.com/download?id=1QIQC1MVPhO_Y1XZNvbb8GSbX3nDx7ppb&confirm=xxx" \
  -o /tmp/GitHub.copilot-chat-latest.vsix && \
  code-server --install-extension /tmp/GitHub.copilot-chat-latest.vsix && \
  rm /tmp/GitHub.copilot-chat-latest.vsix

# https://drive.google.com/file/d/1QIQC1MVPhO_Y1XZNvbb8GSbX3nDx7ppb/view?usp=sharing
# code-server --install-extension github.copilot-chat

npx puppeteer install chrome

echo 'export PUPPETEER_EXECUTABLE_PATH=$(find $HOME/.cache/puppeteer/chrome/linux-* -name chrome | head -n1)' >> ~/.bashrc
echo 'export PUPPETEER_SKIP_DOWNLOAD=true' >> ~/.bashrc

# Disable sandbox for Puppeteer/Decktape
echo 'export PUPPETEER_ARGS="--no-sandbox --disable-setuid-sandbox"' >> ~/.bashrc

npm install -g decktape

# Install the VS code proxy
pip install -e.